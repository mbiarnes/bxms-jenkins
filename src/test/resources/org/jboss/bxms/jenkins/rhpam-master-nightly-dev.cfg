#This configuration is defining BxMS component with upstream development branch
#{{{ COMMON part

[common]
release_code=rhpam-nightly
release_type=nightly
availability=

product_name=RHPAM
product_version_major=7
product_version_minor=5
product_version_micro=0
product_milestone=PAM
product_version=${common:product_version_major}.${common:product_version_minor}.${common:product_version_micro}
product_artifact_version=${common:product_version}${common:availability}.${common:product_milestone}-redhat-SNAPSHOT
product_upload_version=${common:product_version}${common:availability}.${common:product_milestone}
release_engineer=bxms-prod@redhat.com

qe_contactor=
release_estimation=4d
#Enable releaseci trigger. Make it false if you don't want trigger releaseci
releaseci_trigger=false
shared_config=bxms-jira-config.cfg
config_type=common
base=eap-7.2.0
tag=jb-bxms-7.0-maven-build
target=jb-bxms-7.0-maven-candidate
importtag=jb-bxms-7.0-maven-imports
jobprefix=ipbxms-7.0-dev-
jobciprefix=ipbxms-ci-7.0-dev-
jobtimeout=120
jobjdk=java18_default
jobfailureemail=bxms-prod@redhat.com
mvnver=3.5.4
skiptests=brew ;# May be brew, simulator or all.
globalproperties=victims.updates=offline,projectMetaSkip=true
targetbom=rhba/src/main/resources/bom/pom.xml
produceBomSnippet=no
#Trigger on UTC timezone 17:00 oclock
upstream_tag=master@18:00
#If not provide cutoff_date, the release pipeline will generated according to upstream_tag.
cutoff_date=
upstream_handover_url=

# Jira configuration
jira.project_key=IPBRPMS
jira.version_project=rhpam
jira.rapid_view=IP Business Rules and Process Management (Kanban)

jira.summary=${common:product_name} ${common:product_version} ${common:product_milestone} Release
jira.description=upstream tag:${upstream_tag}  ${upstream_handover_url} Release Process is started...

# Makefile location
makefile=Makefile.BRMS
include=from ip-bom-master-nightly-dev.cfg import jboss-integration-platform-bom eap-7.2.0, from common.cfg import mvel-2.4.3 xmlpull-1.1.4

# Upstream components maven configuration
#By default, not skipTests, but this can be set in pipeline when required
mvnSkipTestsOption=
#By default to turn off maven plugins for findbugs, enforcer and gwt.compiler,this can be overrided by add properties in the end
mvnOptions=${mvnSkipTestsOption}full=true,productized=true,maven.test.failure.ignore=true,enforcer.skip=true,gwt.compiler.skip=true,findbugs.skip=true,checkstyle.skip=true,revapi.skip=true,cargo.skip=true
pmeOptions=overrideTransitive=false,versionOverride=true,strictAlignment=false,illegaltransitivereportonly=true

#Component Maven and JRE Options Set, which is useed to accelerate jenkins build.
smallCompoThreadSet=-T3
smallCompoMemSet=-Xms512m,-Xmx3g
#For big component take long time, use gwt as marker
##Options to make big component running on big node
bigCompoThreadSet=-T6
bigCompoMemSet=-Xms1g,-Xmx3g

[rhpam-build-bom]
config_type=bom-builder
package=org.kie.rhba.component.management-rhpam-bom-builder
version=2.1.0
depmgmt=org.kie.rhba.component.management:rhpam-dependency-management-all
propertymgmt=org.kie.rhba.component.management:rhpam-dependency-management-all
repoReportingRemoval=true
#repositoryInjection=org.kie.rhba.component.management:rhba-dependency-management-all
skipDeployment=false
properties=manipulation.disable=true,ip.config.sha=,cfg=rhpam-master-nightly-dev.cfg
childpackage=org.kie.rhba.component.management-rhpam-dependency-management-all
childmapping=version.org.kie.rhba.component.management
childversion=7.5.0.BA-redhat-SNAPSHOT
produceBomSnippet=no
scmURL=git+https://code.engineering.redhat.com/gerrit/soa/soa-component-management.git?rhpam#almorale-temp
buildrequires=

#Use as root GAV for offline repo builder, also a collection for all deliverables
[rhpam-maven-repo-root]
package=org.kie.rhba-rhpam-maven-repo-root
version=${common:product_artifact_version}
produceBomSnippet=no
properties=${common:pmeOptions},
  dependencyOverride.com.redhat.ba:*@*=${common:product_artifact_version}
scmURL=git+https://code.engineering.redhat.com/gerrit/rhpam-maven-repo-root.git#master
buildrequires=rhba-boms droolsjbpm-integration rhpam-installer

[rhba-license-builder]
package=org.kie.rhba-license-builder
version=${common:product_artifact_version}
produceBomSnippet=no
properties=${common:pmeOptions},skipTest=true,maven.test.skip=true
#license-maven-plugin requires big memory to avoid out of memory issue
jvmOpts=-Xms2g, -Xmx8g
#-XX:+UseConcMarkSweepGC, -XX:-UseGCOverheadLimit
scmURL=git+https://code.engineering.redhat.com/gerrit/bxms-licenses-builder.git#master
buildrequires=kie-wb-distributions

[rhpam]
package=org.kie.rhba-rhpam
version=7.5.0.PAM-redhat-SNAPSHOT
mapping=version.org.kie.rhba.rhpam
produceBomSnippet=no
scmURL=git+https://code.engineering.redhat.com/gerrit/kiegroup/rhbas.git#master
properties=${common:pmeOptions}
buildrequires=kie-wb-distributions rhba-common optashift-employee-rostering openshift-drools-hacep

#Automation Portfolio Common
[rhba-common]
package=org.kie.rhba-rhba-common
version=${common:product_artifact_version}
produceBomSnippet=no
scmURL=git+https://code.engineering.redhat.com/gerrit/kiegroup/rhap-common.git#master
properties=${common:pmeOptions}
buildrequires=rhba-license-builder

[izpack]
package=org.codehaus.izpack-izpack-standalone-compiler
mapping=version.org.codehaus.izpack
version=4.4.32.rhba-redhat-SNAPSHOT
produceBomSnippet=no
properties=${common:pmeOptions}
scmURL=git+https://code.engineering.redhat.com/gerrit/prod-izpack.git#bxms-7.0
buildrequires=rhpam-build-bom

[installer-commons]
package=org.jboss.installer-installer-commons
mapping=version.org.jboss.installer
version=2.0.33.rhba-redhat-SNAPSHOT
produceBomSnippet=no
properties=${common:pmeOptions},maven.test.failure.ignore=true,
  dependencyOverride.org.codehaus.izpack:*@*=${izpack:version}
scmURL=git+https://code.engineering.redhat.com/gerrit/prod-installer-commons.git#bxms-7.0
buildrequires=izpack

[rhpam-installer]
package=org.jboss.installer-rhpam-installer
version=${common:product_artifact_version}
properties=${common:pmeOptions}
scmURL=git+https://code.engineering.redhat.com/gerrit/bpms-installer.git#master
buildrequires=rhpam installer-commons

[rhba-boms]
package=com.redhat.ba-bom-parent
mapping=version.com.redhat.ba.ba-bom
version=7.5.0.PAM-redhat-SNAPSHOT
properties=${common:pmeOptions}
scmURL=git+https://code.engineering.redhat.com/gerrit/jboss-integration/rhba-boms.git#master
buildrequires=optaplanner

[kie-soup]
package=org.kie.soup-kie-soup-parent
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://github.com/kiegroup/kie-soup.git#${common:upstream_tag}
buildrequires=rhpam-build-bom

[lienzo-core]
package=org.kie-lienzo-core
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://code.engineering.redhat.com/gerrit/kiegroup/lienzo-core.git#${common:upstream_tag}
buildrequires=rhpam-build-bom

[lienzo-tests]
package=org.kie-lienzo-tests
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://code.engineering.redhat.com/gerrit/kiegroup/lienzo-tests.git#${common:upstream_tag}
buildrequires=lienzo-core

[appformer]
package=org.uberfire-uberfire-parent
mapping=version.org.uberfire
version=2.11.0.redhat-SNAPSHOT
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions},
        dependencyOverride.org.freemarker:*@*=2.3.26.incubating-redhat-1,
        dependencyOverride.org.infinispan:*@*=9.4.13.Final-redhat-00001
scmURL=git+https://github.com/kiegroup/appformer.git#${common:upstream_tag}
buildrequires=rhpam-build-bom lienzo-tests droolsjbpm-build-bootstrap kie-soup

[droolsjbpm-build-bootstrap]
package=org.kie-kie-parent
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
#Note that we use strictAlignment for kie-parent since it manage all kie deps
properties=${common:pmeOptions},${common:mvnOptions},strictAlignment=true,
        dependencyOverride.org.wildfly.swarm:*@*=7.1.0.redhat-77,
        dependencyOverride.org.jboss.resteasy:*@*=3.6.1.SP2-redhat-00001,
        dependencyOverride.org.freemarker:*@*=2.3.26.incubating-redhat-1,
        dependencyOverride.org.apache.tomcat:tomcat-dbcp@*=9.0.7.redhat-12,
        dependencyOverride.org.jboss.narayana.tomcat:*@*=5.9.0.Final-redhat-00001,
        dependencyOverride.org.infinispan:*@*=9.4.13.Final-redhat-00001,
        dependencyOverride.org.jboss:jboss-transaction-spi@*=7.6.0.Final-redhat-1,
        dependencyOverride.org.jboss.integration:narayana-tomcat@*=1.0.0.Final-redhat-1
scmURL=git+https://github.com/kiegroup/droolsjbpm-build-bootstrap.git#${common:upstream_tag}
#This patch is only needed for nightly build for fixing the takari plugin deployment with authentication
buildrequires=rhpam-build-bom

[droolsjbpm-knowledge]
package=org.kie-kie-api-parent
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
scmURL=git+https://github.com/kiegroup/droolsjbpm-knowledge.git#${common:upstream_tag}
buildrequires=droolsjbpm-build-bootstrap kie-soup

[drools]
package=org.drools-drools
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/drools.git#${common:upstream_tag}
buildrequires=droolsjbpm-knowledge appformer

[optaplanner]
package=org.optaplanner-optaplanner
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://github.com/kiegroup/optaplanner.git#${common:upstream_tag}
buildrequires=drools

[jbpm]
package=org.jbpm-jbpm
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://github.com/kiegroup/jbpm.git#${common:upstream_tag}
buildrequires=drools

[jbpm-work-items]
package=org.jbpm.contrib-workitems
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
scmURL=git+https://github.com/kiegroup/jbpm-work-items#${common:upstream_tag}
jobtimeout=120
buildrequires=jbpm droolsjbpm-integration

[droolsjbpm-integration]
package=org.drools-droolsjbpm-integration
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/droolsjbpm-integration.git#${common:upstream_tag}
patches=git://pkgs.devel.redhat.com/rpms/droolsjbpm-integration#1d1add64cd59228e04d8b49d69b94dac97a82682
jobtimeout=120
buildrequires=jbpm optaplanner

[kie-uberfire-extensions]
package=org.kie.uberfire-kie-uberfire-extensions
mapping=version.org.kie.uberfire
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
scmURL=git+https://github.com/kiegroup/kie-uberfire-extensions.git#${common:upstream_tag}
buildrequires=droolsjbpm-build-bootstrap

[kie-wb-playground]
package=org.kie.workbench.playground-playground-parent
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://github.com/kiegroup/kie-wb-playground.git#${common:upstream_tag}
jobtimeout=120
buildrequires=optaplanner droolsjbpm-integration

[kie-wb-common]
package=org.kie.workbench-kie-wb-common
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
properties=${common:pmeOptions},${common:mvnOptions}
scmURL=git+https://github.com/kiegroup/kie-wb-common.git#${common:upstream_tag}
jobtimeout=120
buildrequires=kie-wb-playground droolsjbpm-integration

[drools-wb]
package=org.drools-drools-wb
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
skipDeployment=false
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/drools-wb.git#${common:upstream_tag}
jobtimeout=120
buildrequires=kie-wb-common

[jbpm-designer]
package=org.jbpm-jbpm-designer
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
scmURL=git+https://github.com/kiegroup/jbpm-designer.git#${common:upstream_tag}
jobtimeout=120
buildrequires=kie-wb-common

[jbpm-wb]
package=org.jbpm-jbpm-wb
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions},gwt.compiler.skip=false,gwt.compiler.localWorkers=4
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/jbpm-wb.git#${common:upstream_tag}
jobtimeout=120
buildrequires=drools-wb jbpm-designer kie-uberfire-extensions

[optaplanner-wb]
package=org.optaplanner-optaplanner-wb
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:smallCompoMemSet}
mavenOpts=${common:smallCompoThreadSet}
scmURL=git+https://github.com/kiegroup/optaplanner-wb.git#${common:upstream_tag}
jobtimeout=120
buildrequires=drools-wb

[kie-wb-distributions]
package=org.kie-kie-wb-distributions
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions},gwt.compiler.skip=false,gwt.compiler.localWorkers=3,gwt.memory.settings="-Xmx15g",
            dependencyOverride.org.infinispan:*@*=9.4.13.Final-redhat-00001
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/kie-wb-distributions.git#${common:upstream_tag}
jobtimeout=120
buildrequires=jbpm-wb optaplanner-wb jbpm-work-items

[optashift-employee-rostering]
package=org.optaplanner.openshift-optashift-employee-rostering
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions},gwt.compiler.skip=false,gwt.compiler.localWorkers=4,skipTests=true,repositoryInjection=org.kie.rhba.component.management:rhpam-dependency-management-all:${rhpam-build-bom:childversion}
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/optashift-employee-rostering.git#${common:upstream_tag}
jobtimeout=120
buildrequires=errai optaplanner

[openshift-drools-hacep]
package=org.kie-openshift-kie-parent
mapping=version.org.kie
version=7.5.0.redhat-SNAPSHOT
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
scmURL=git+https://github.com/kiegroup/openshift-drools-hacep.git#${common:upstream_tag}
jobtimeout=120
buildrequires=droolsjbpm-integration

#}}}

[errai]
package=org.jboss.errai-errai-parent
mapping=version.org.jboss.errai
version=4.6.0.Final-redhat-00001
properties=${common:pmeOptions},${common:mvnOptions}
jvmOpts=${common:bigCompoMemSet}
mavenOpts=${common:bigCompoThreadSet}
jobtimeout=120
scmURL=git+https://github.com/errai/errai.git#4.6.0.Final
buildrequires=rhpam-build-bom

#{{{# Third Party

[kie.workbench]
config_type=bom-builder-meta
mapping=version.org.kie.workbench.app
version=7.5.0-SNAPSHOT


[revapi.oldKieVersion]
config_type=bom-builder-meta
mapping=revapi.oldKieVersion
version=6.5.0.Final-redhat-17

#Use only for update bxms-patch-tools properties, Please ignore the following value for main release but don't remove them
[brms-bpmsuite.latest.release]
config_type=bom-builder-meta
mapping=version.brms-bpmsuite.latest.release
version=7.2.0.GA-redhat-00002

[brms-bpmsuite.latest.patch]
config_type=bom-builder-meta
mapping=version.brms-bpmsuite.latest.patch
version=7.22.0.Final-redhat-00001

[brms-bpmsuite.latest.patch.user.facing]
config_type=bom-builder-meta
mapping=version.brms-bpmsuite.latest.patch.user.facing
version=7.22.0

[brms-bpmsuite.previous.patch]
config_type=bom-builder-meta
mapping=version.brms-bpmsuite.previous.patch
version=7.3.1.GA-redhat-00002
